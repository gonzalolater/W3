# Launch Ethereum Node

1. command line
    - entry file: `cmd/geth/main.go`
    - main function
        - run the command application created in the package `init` function
        - use the action function of `geth` root command to start full node
        - execute the prepare step
            - check the network name
            - check the cache setting
            - start the metrics collector
        - create the full node
            - make the node and configure the node
            - register the ethereum service
            - register RPC filter service
            - register GraphQL service
            - register ethereum statisctics service
            - register engine API service
        - start the node
            - dependent parameters
                - command line context
                - node instance
                - console boolean flag
            - start the node by the utility function
                - execute the node's `Start` method
                - goroutine to monitor shutdown through signal
            - separate goroutine for wallet management
            - spawn a standalone goroutine for status synchronization monitoring
        - wait for node's shutdown

2. node class
    - file location: `node/node.go`
    - main content
        - definition of `Node` structure
            - configuration
            - account manager
            - log
            - key directory
            - directory lock
            - termination notification channel
            - p2p network server and layer
            - mutual exclude lock
            - lifecycle services
            - rpc api list
            - http, ws, ipc server
        - factory function
            - function name: `New`
            - check data directory
            - make a new rpc server instance
            - make a new node instance
            - collect all apis
            - open data directory
            - assign the key directory
            - assign node key
            - assign node name
            - create http servers
        - start method
            - method name: `Start`
            - method body
                - lock the entrancy
                - assign node running state
                - start p2p and rcp endpoints
                - start lifecycle services
                - exit when errors happen
